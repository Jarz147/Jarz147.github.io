<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cek Koneksi Supabase</title>
</head>
<body>
    <h1>Data dari Supabase:</h1>
    <ul id="data-list">Sedang memuat...</ul>

    <script type="module">
        import { createClient } from 'https://cdn.jsdelivr.net/npm/@supabase/supabase-js/+esm'

        // 1. Pastikan URL tidak diakhiri dengan tanda miring (/)
        const SUPABASE_URL = 'https://synhvvaolrjxdcbyozld.supabase.co'
        
        // 2. Gunakan ANON_KEY (yang sangat panjang) dari Settings > API
        const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InN5bmh2dmFvbHJqeGRjYnlvemxkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njk5Njg4NzEsImV4cCI6MjA4NTU0NDg3MX0.GSEfz8HVd49uEWXd70taR6FUv243VrFJKn6KlsZW-aQ'

        const supabase = createClient(SUPABASE_URL, SUPABASE_ANON_KEY)

        async function ambilData() {
            try {
                // 3. Nama tabel HARUS Sesuai Gambar 2: 'Order-sparepart'
                const { data, error } = await supabase
                    .from('Order-sparepart') 
                    .select('*')

                const listElement = document.getElementById('data-list');
                
                if (error) {
                    // Jika error datang dari Supabase (seperti RLS atau Typo tabel)
                    listElement.innerHTML = "Gagal memuat: " + error.message;
                    console.error("Error Supabase:", error);
                } else {
                    // 4. Pastikan 'nama_kolom' diganti dengan nama kolom asli di tabelmu (misal: 'nama_barang')
                    if (data.length === 0) {
                        listElement.innerHTML = "Koneksi berhasil, tapi tabel kosong.";
                    } else {
                        // Menampilkan seluruh data dalam format JSON agar kamu bisa cek nama kolomnya
                        listElement.innerHTML = data.map(item => `<li>${JSON.stringify(item)}</li>`).join('');
                    }
                }
            } catch (err) {
                // Jika masuk ke sini, biasanya karena diblokir browser (AdBlock) atau salah URL
                console.error("Kesalahan Fatal:", err);
                document.getElementById('data-list').innerHTML = "Gagal memuat: Terjadi kesalahan koneksi (Cek Console F12)";
            }
        }

        ambilData();
    </script>
</body>
</html>
